<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lista Iscritti</title>
    <link rel="stylesheet" th:href="@{/styles/style.css}">
</head>
<body>
    <form th:action="@{/Logout}" method="post" style="position: fixed; top: 20px; right: 20px;">
        <button type="submit" style="background-color: red;">Logout</button>
    </form>
    <h1>Elenco Iscritti</h1>
    <table border="1" style="width: 100%; border-collapse: collapse; margin-top: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <thead>
            <tr style="background-color: #f8f9fa;">
                <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; font-weight: bold;"><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='matricola', orderDirection=${orderBy == 'matricola' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}" style="text-decoration: none; color: #007bff;">Matricola</a></th>
                <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; font-weight: bold;"><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='cognome', orderDirection=${orderBy == 'cognome' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}" style="text-decoration: none; color: #007bff;">Cognome</a></th>
                <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; font-weight: bold;"><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='nome', orderDirection=${orderBy == 'nome' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}" style="text-decoration: none; color: #007bff;">Nome</a></th>
                <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; font-weight: bold;"><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='email', orderDirection=${orderBy == 'email' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}" style="text-decoration: none; color: #007bff;">Email</a></th>
                <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; font-weight: bold;"><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='corso_laurea', orderDirection=${orderBy == 'corso_laurea' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}" style="text-decoration: none; color: #007bff;">Laurea</a></th>
                <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; font-weight: bold;"><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='voto', orderDirection=${orderBy == 'voto' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}" style="text-decoration: none; color: #007bff;">Voto</a></th>
                <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; font-weight: bold;"><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='stato_valutazione', orderDirection=${orderBy == 'stato_valutazione' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}" style="text-decoration: none; color: #007bff;">Stato Valutazione</a></th>
                <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6; font-weight: bold;">Azioni</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="iscritto : ${iscritti}" style="border-bottom: 1px solid #dee2e6;">
                <td style="padding: 12px; border: 1px solid #dee2e6;" th:text="${iscritto.matricola}">123456</td>
                <td style="padding: 12px; border: 1px solid #dee2e6;" th:text="${iscritto.cognome}">Rossi</td>
                <td style="padding: 12px; border: 1px solid #dee2e6;" th:text="${iscritto.nome}">Mario</td>
                <td style="padding: 12px; border: 1px solid #dee2e6;" th:text="${iscritto.email}">mario.rossi@email.it</td>
                <td style="padding: 12px; border: 1px solid #dee2e6;" th:text="${iscritto.corsoLaurea}">Ingegneria Informatica</td>
                <td style="padding: 12px; border: 1px solid #dee2e6;" th:text="${iscritto.voto}">28</td>
                <td style="padding: 12px; border: 1px solid #dee2e6;" th:text="${iscritto.statoDiValutazione}">Approvato</td>
                <td style="padding: 12px; border: 1px solid #dee2e6;" th:if="${iscritto.statoDiValutazione.name() != 'PUBBLICATO' and iscritto.statoDiValutazione.name() != 'RIFIUTATO' and iscritto.statoDiValutazione.name() != 'VERBALIZZATO'}">
                    <a th:href="@{'/inserisci-valutazione?id_studente=' + ${iscritto.idStudente} + '&id_appello=' + ${iscritto.IDAppello}}">
                        <button style="background-color: #007bff; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer;">MODIFICA</button>
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
    <form th:action="@{'/iscritti-appello?id_appello=' + ${iscritti[0].IDAppello}}" method="post">
        <button type="submit" style="background-color: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">PUBBLICA</button>
    </form>
    <form th:if="${ciSonoStudentiDaVerbalizzare}" th:action="@{'/pagina-verbale?id_appello=' + ${iscritti[0].IDAppello}}" method="post">
        <button type="submit" style="background-color: green; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">VERBALIZZA</button>
    </form>
    
    <div style="margin-top: 20px;">
        <a th:href="@{/home-docente}" style="text-decoration: none; color: #007bff; padding: 10px 20px; border: 1px solid #007bff; border-radius: 5px; background-color: white;">Torna alla Home Docente</a>
    </div>
</body>
</html> 