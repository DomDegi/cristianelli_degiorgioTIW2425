<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lista Iscritti</title>
    <link rel="stylesheet" th:href="@{/styles/style.css}">
</head>
<body>
    <form th:action="@{/Logout}" method="post" style="position: fixed; top: 20px; right: 20px;">
        <button type="submit" style="background-color: red;">Logout</button>
    </form>
    <h1>Elenco Iscritti</h1>
    <table border="1">
        <thead>
            <tr>
                <th><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='matricola', orderDirection=${orderBy == 'matricola' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}">Matricola</a></th>
                <th><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='cognome', orderDirection=${orderBy == 'cognome' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}">Cognome</a></th>
                <th><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='nome', orderDirection=${orderBy == 'nome' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}">Nome</a></th>
                <th><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='email', orderDirection=${orderBy == 'email' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}">Email</a></th>
                <th><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='corso_laurea', orderDirection=${orderBy == 'corso_laurea' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}">Laurea</a></th>
                <th><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='voto', orderDirection=${orderBy == 'voto' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}">Voto</a></th>
                <th><a th:href="@{/iscritti-appello(id_appello=${iscritti[0].IDAppello}, orderBy='stato_valutazione', orderDirection=${orderBy == 'stato_valutazione' and orderDirection == 'ASC' ? 'DESC' : 'ASC'})}">Stato Valutazione</a></th>
                <th>Azioni</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="iscritto : ${iscritti}">
                <td th:text="${iscritto.matricola}">123456</td>
                <td th:text="${iscritto.cognome}">Rossi</td>
                <td th:text="${iscritto.nome}">Mario</td>
                <td th:text="${iscritto.email}">mario.rossi@email.it</td>
                <td th:text="${iscritto.corsoLaurea}">Ingegneria Informatica</td>
                <td th:text="${iscritto.voto}">28</td>
                <td th:text="${iscritto.statoDiValutazione}">Approvato</td>
                <td th:if="${iscritto.statoDiValutazione.name() != 'PUBBLICATO' and iscritto.statoDiValutazione.name() != 'RIFIUTATO' and iscritto.statoDiValutazione.name() != 'VERBALIZZATO'}">
                    <a th:href="@{'/ModificaStudente?id_studente=' + ${iscritto.idStudente} + '&id_appello=' + ${iscritto.IDAppello}}">
                        <button>MODIFICA</button>
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
    <form th:action="@{'/iscritti-appello?id_appello=' + ${iscritti[0].IDAppello}}" method="post">
        <button type="submit">PUBBLICA</button>
    </form>
    <form th:action="@{'/PaginaVerbale?id_appello=' + ${iscritti[0].IDAppello}}" method="post">
        <button type="submit">VERBALIZZA</button>
    </form>
</body>
</html> 